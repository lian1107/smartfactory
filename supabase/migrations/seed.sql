-- seed.sql
-- Initial data: defect codes, phase templates, project templates

-- ─────────────────────────────────────────────────────────────
-- Defect Codes
-- ─────────────────────────────────────────────────────────────
INSERT INTO public.defect_codes (code, name, description, category, severity) VALUES
  ('APP-001', '划伤',     '产品表面有划痕',           'appearance', 'minor'),
  ('APP-002', '凹陷',     '产品表面有凹陷',           'appearance', 'major'),
  ('APP-003', '色差',     '产品颜色与标准不符',       'appearance', 'minor'),
  ('APP-004', '污染',     '产品表面有污渍或异物',     'appearance', 'minor'),
  ('APP-005', '起泡',     '涂层或表面有气泡',         'appearance', 'major'),
  ('DIM-001', '尺寸超差', '产品尺寸超出公差范围',     'dimension',  'major'),
  ('DIM-002', '形位误差', '形状或位置误差超出要求',   'dimension',  'major'),
  ('DIM-003', '孔径偏差', '孔径不符合图纸要求',       'dimension',  'critical'),
  ('FUN-001', '功能失效', '产品核心功能无法正常工作', 'function',   'critical'),
  ('FUN-002', '性能不达标','产品性能指标未达标',      'function',   'major'),
  ('FUN-003', '漏电',     '电气绝缘不足导致漏电',     'function',   'critical'),
  ('MAT-001', '材料错误', '使用了错误规格的材料',     'material',   'critical'),
  ('MAT-002', '材料缺陷', '原材料本身存在缺陷',       'material',   'major'),
  ('PRO-001', '装配错误', '零件装配顺序或方式错误',   'process',    'major'),
  ('PRO-002', '焊接缺陷', '焊接质量不符合要求',       'process',    'major'),
  ('PRO-003', '紧固不足', '螺栓或扣件未达到要求力矩', 'process',    'major'),
  ('OTH-001', '标识缺失', '产品标识或标签缺失',       'other',      'minor'),
  ('OTH-002', '包装损坏', '产品包装破损',             'other',      'minor')
ON CONFLICT (code) DO NOTHING;

-- ─────────────────────────────────────────────────────────────
-- Phase Templates
-- ─────────────────────────────────────────────────────────────
INSERT INTO public.phase_templates (id, name, description, default_order, color, icon) VALUES
  ('11111111-0001-0000-0000-000000000000', '需求评审',   '确认需求和技术规格',         1,  '#6366F1', 'checklist'),
  ('11111111-0002-0000-0000-000000000000', '设计阶段',   '工程设计和图纸输出',         2,  '#8B5CF6', 'draw'),
  ('11111111-0003-0000-0000-000000000000', '物料采购',   '采购物料和外协件',           3,  '#EC4899', 'shopping_cart'),
  ('11111111-0004-0000-0000-000000000000', '生产准备',   '模具、夹具、工装准备',       4,  '#F59E0B', 'build'),
  ('11111111-0005-0000-0000-000000000000', '样品制作',   '首件或样品生产',             5,  '#10B981', 'science'),
  ('11111111-0006-0000-0000-000000000000', '样品检验',   '样品质量检验和问题整改',     6,  '#3B82F6', 'verified'),
  ('11111111-0007-0000-0000-000000000000', '量产准备',   '量产工艺固化和首件确认',     7,  '#F97316', 'factory'),
  ('11111111-0008-0000-0000-000000000000', '量产',       '正式批量生产',               8,  '#14B8A6', 'precision_manufacturing'),
  ('11111111-0009-0000-0000-000000000000', '出货检验',   'OQC 出货检验',               9,  '#84CC16', 'local_shipping'),
  ('11111111-0010-0000-0000-000000000000', '交付完成',   '订单交付并归档',             10, '#6B7280', 'done_all'),
  ('11111111-0011-0000-0000-000000000000', '待处理',     '新建任务待分配',             1,  '#6366F1', 'inbox'),
  ('11111111-0012-0000-0000-000000000000', '进行中',     '正在处理的任务',             2,  '#F59E0B', 'pending'),
  ('11111111-0013-0000-0000-000000000000', '待审核',     '等待审核或确认',             3,  '#8B5CF6', 'rate_review'),
  ('11111111-0014-0000-0000-000000000000', '已完成',     '已完成的任务',               4,  '#10B981', 'check_circle')
ON CONFLICT (id) DO NOTHING;

-- ─────────────────────────────────────────────────────────────
-- Project Templates
-- ─────────────────────────────────────────────────────────────
INSERT INTO public.project_templates (id, name, description, phase_ids, is_default) VALUES
  (
    '22222222-0001-0000-0000-000000000000',
    '新品开发流程',
    '适用于全新产品从设计到量产的完整流程',
    ARRAY[
      '11111111-0001-0000-0000-000000000000',
      '11111111-0002-0000-0000-000000000000',
      '11111111-0003-0000-0000-000000000000',
      '11111111-0004-0000-0000-000000000000',
      '11111111-0005-0000-0000-000000000000',
      '11111111-0006-0000-0000-000000000000',
      '11111111-0007-0000-0000-000000000000',
      '11111111-0008-0000-0000-000000000000',
      '11111111-0009-0000-0000-000000000000',
      '11111111-0010-0000-0000-000000000000'
    ]::UUID[],
    TRUE
  ),
  (
    '22222222-0002-0000-0000-000000000000',
    '量产订单流程',
    '适用于已有工艺的成熟产品量产订单',
    ARRAY[
      '11111111-0007-0000-0000-000000000000',
      '11111111-0008-0000-0000-000000000000',
      '11111111-0009-0000-0000-000000000000',
      '11111111-0010-0000-0000-000000000000'
    ]::UUID[],
    FALSE
  ),
  (
    '22222222-0003-0000-0000-000000000000',
    '简易看板',
    '通用简易任务看板，适用于非生产类项目',
    ARRAY[
      '11111111-0011-0000-0000-000000000000',
      '11111111-0012-0000-0000-000000000000',
      '11111111-0013-0000-0000-000000000000',
      '11111111-0014-0000-0000-000000000000'
    ]::UUID[],
    FALSE
  )
ON CONFLICT (id) DO NOTHING;
